---
layout: post
title: "DockerSwarm 쓰면서 사용한 명령어"
date: 2021-10-02
categories: TIL Docker-machine DockerSwarm
---

sudo docker system prune -a -f
docker system prune --volumes
Docker Swarm Visualization Tool 설치하기 (docker의 상황 시각적으로 확인가능)
docker service create --name=Swarm_Cluster --publish=8881:8080 --constraint=node.role==manager --mount=type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock dockersamples/visualizer

loadbalance test
sudo docker service create --name loadbalance_test --replicas 4 -p 80:80 utyk/swarm_loadbalance_check:1.0

docker swarm ip
docker node inspect self --format '{{ .Status.Addr  }}'

docker service inspect --format="{{json .Endpoint.Spec.Ports}}" my-web

sudo journalctl -u docker.service

sudo netstat -tnlp

node attribute matches example
node.id Node ID node.id==2ivku8v2gvtg4
node.hostname Node hostname node.hostname!=node-2
node.role Node role node.role==manager
node.labels user defined node labels node.labels.security==high
engine.labels Docker Engine’s labels engine.labels.operatingsystem==ubuntu 14.04

error메세지 다 보기
sudo docker service ps --no-trunc web_server

docker service rollback

docker service update
